name: PR Lints (C/C++)

on:
  pull_request:
    branches: [ main ]

permissions:
  contents: read
  pull-requests: write
  checks: write

jobs:
  cpp_linter:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: C/C++ Linter (clang-tidy + cppcheck)
        uses: cpp-linter/cpp-linter-action@v2
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          files-changed-only: true
          include: |
            src/**
            include/**
          ignore: |
            test/**
            html/**
            docs/**
          style: ''
          tidy-checks: '-*,bugprone-*,performance-*,clang-analyzer-*'
          tidy-review: true
          cppcheck: true
          cppcheck-extra-args: '--enable=warning,style,performance,portability --std=c++17 --inline-suppr'
          thread-comments: true
          fail-on: ''

