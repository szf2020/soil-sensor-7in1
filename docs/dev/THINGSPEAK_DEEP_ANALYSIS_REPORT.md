# üîç –ì–õ–£–ë–û–ö–ò–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ THINGSPEAK

## üìã –ö–û–ù–°–ò–õ–ò–£–ú –°–ü–ï–¶–ò–ê–õ–ò–°–¢–û–í

**–ü—Ä–∏–≥–ª–∞—à–µ–Ω—ã:**
- **IoT/ESP32 —ç–∫—Å–ø–µ—Ä—Ç** - –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ —Å–≤—è–∑–∏
- **HTTP/REST API —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤  
- **Data Encoding —ç–∫—Å–ø–µ—Ä—Ç** - –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∏—Ä–æ–≤–æ–∫
- **ThingSpeak API —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç** - —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞
- **Network Debugger** - –∞–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

---

## üö® –°–ò–ú–ü–¢–û–ú–´ –ü–†–û–ë–õ–ï–ú–´

### –û—Å–Ω–æ–≤–Ω–∞—è –æ—à–∏–±–∫–∞:
```
ThingSpeak: –û—à–∏–±–∫–∞: –û—Ç–∫–ª—é—á—ë–Ω –Ω–∞ 1 —á–∞—Å (–º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫)
```

### –õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
```cpp
// –ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥, –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ–º –Ω–∞ 1 —á–∞—Å
if (consecutiveFailCount >= 10)
{
    logWarnSafe("\1", consecutiveFailCount);
    lastTsPublish = millis();  // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ø—ã—Ç–∫–∏
    consecutiveFailCount = 0;  // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫
    strlcpy(thingSpeakLastErrorBuffer.data(), "–û—Ç–∫–ª—é—á—ë–Ω –Ω–∞ 1 —á–∞—Å (–º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫)", thingSpeakLastErrorBuffer.size());
}
```

---

## üîç –ê–ù–ê–õ–ò–ó –ö–û–î–ê

### 1. –ü–†–û–ë–õ–ï–ú–´ –í –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ò –î–ê–ù–ù–´–•

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ `jxct_format_utils.cpp`:**
```cpp
std::array<char, 8> buf;  // ‚ö†Ô∏è –°–õ–ò–®–ö–û–ú –ú–ê–õ–ï–ù–¨–ö–ò–ô –ë–£–§–ï–†!

snprintf(buf.data(), buf.size(), (options.formatType == FormatType::INTEGER) ? "%d" : "%.*f",
         (options.formatType == FormatType::INTEGER) ? static_cast<int>(lround(value)) : options.precision,
         (options.formatType == FormatType::INTEGER) ? 0 : value);
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ë—É—Ñ–µ—Ä –≤—Å–µ–≥–æ 8 –±–∞–π—Ç - –º–æ–∂–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–∏—Ç—å—Å—è
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ NaN/Inf –∑–Ω–∞—á–µ–Ω–∏—è
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 2. –ü–†–û–ë–õ–ï–ú–´ –í THINGSPEAK –ö–õ–ò–ï–ù–¢–ï

**–í `thingspeak_client.cpp`:**
```cpp
// –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
ThingSpeak.setField(1, format_temperature(sensorData.temperature).c_str());
ThingSpeak.setField(2, format_moisture(sensorData.humidity).c_str());
ThingSpeak.setField(3, format_ec(sensorData.ec).c_str());
ThingSpeak.setField(4, format_ph(sensorData.ph).c_str());
ThingSpeak.setField(5, format_npk(sensorData.nitrogen).c_str());
ThingSpeak.setField(6, format_npk(sensorData.phosphorus).c_str());
ThingSpeak.setField(7, format_npk(sensorData.potassium).c_str());
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å sensorData
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. –ü–†–û–ë–õ–ï–ú–´ –° –°–ï–¢–ï–í–´–ú –°–û–ï–î–ò–ù–ï–ù–ò–ï–ú

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –æ—Ç–≤–µ—Ç–æ–≤

---

## üî¨ –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó

### 1. –ê–ù–ê–õ–ò–ó –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏:**
- `NaN` –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç –¥–∞—Ç—á–∏–∫–æ–≤
- `Inf` –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ –Ω–æ–ª—å
- –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞, –Ω–µ –ø–æ–º–µ—â–∞—é—â–∏–µ—Å—è –≤ –±—É—Ñ–µ—Ä

### 2. –ê–ù–ê–õ–ò–ó HTTP –ó–ê–ü–†–û–°–û–í

**ThingSpeak API —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- URL: `https://api.thingspeak.com/update`
- –ú–µ—Ç–æ–¥: POST
- Content-Type: application/x-www-form-urlencoded
- –ü–æ–ª—è: field1, field2, field3, field4, field5, field6, field7
- API Key –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Content-Type
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ User-Agent
- –ü—Ä–æ–±–ª–µ–º—ã —Å SSL/TLS

### 3. –ê–ù–ê–õ–ò–ó –û–®–ò–ë–û–ö

**–ö–æ–¥—ã –æ—à–∏–±–æ–∫ ThingSpeak:**
- `200` - —É—Å–ø–µ—Ö
- `400` - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `401` - –Ω–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- `404` - –Ω–µ–≤–µ—Ä–Ω—ã–π Channel ID
- `429` - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤

**–ù–∞—à–∏ –∫–æ–¥—ã –æ—à–∏–±–æ–∫:**
- `-301` - —Ç–∞–π–º–∞—É—Ç
- `-401` - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–π
- `-302` - –Ω–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- `-304` - –Ω–µ–≤–µ—Ä–Ω—ã–π Channel ID
- `0` - –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## üõ†Ô∏è –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –í–´–í–û–î–´

### 1. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´
- **–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞** –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ NaN/Inf** –∑–Ω–∞—á–µ–Ω–∏–π
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** HTTP –æ—Ç–≤–µ—Ç–æ–≤

### 2. –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´
- **–ü—Ä–æ–±–ª–µ–º—ã —Å SSL** —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö
- **–°–µ—Ç–µ–≤—ã–µ —Ç–∞–π–º–∞—É—Ç—ã** –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- **–ü—Ä–æ–±–ª–µ–º—ã —Å WiFi** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º

### 3. –ü–†–û–ë–õ–ï–ú–´ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
- **–ù–µ–≤–µ—Ä–Ω—ã–µ API –∫–ª—é—á–∏** –∏–ª–∏ Channel ID
- **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤** ThingSpeak
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã** –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## üéØ –ü–õ–ê–ù –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò

### 1. –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø
- [x] ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (8‚Üí32 –±–∞–π—Ç)
- [x] ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É NaN/Inf –∑–Ω–∞—á–µ–Ω–∏–π
- [x] ‚úÖ –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –æ—Ç–≤–µ—Ç–æ–≤

### 2. –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ï –¢–ï–°–¢–´
- [ ] –¢–µ—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- [ ] –¢–µ—Å—Ç HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] –¢–µ—Å—Ç SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- [ ] –¢–µ—Å—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ API –∫–ª—é—á–µ–π

### 3. –ú–û–ù–ò–¢–û–†–ò–ù–ì
- [ ] –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
- [ ] –ê–Ω–∞–ª–∏–∑ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –û–®–ò–ë–û–ö

### –¢–µ–∫—É—â–∏–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫:
- `-301`: –¢–∞–π–º–∞—É—Ç (—Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)
- `-401`: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç (15 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏)
- `-302`: –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- `-304`: –ù–µ–≤–µ—Ä–Ω—ã–π Channel ID
- `0`: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `400`: HTTP 400 - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å

### –õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
- –ü–æ—Å–ª–µ 10 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 1 —á–∞—Å
- –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –æ—à–∏–±–æ–∫

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø
1. **–£–≤–µ–ª–∏—á–∏—Ç—å –±—É—Ñ–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** —Å 8 –¥–æ 32 –±–∞–π—Ç
2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
3. **–û–±—Ä–∞–±–æ—Ç–∞—Ç—å NaN/Inf** –∑–Ω–∞—á–µ–Ω–∏—è
4. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** HTTP –æ—Ç–≤–µ—Ç–æ–≤

### 2. –î–û–õ–ì–û–°–†–û–ß–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø
1. [x] ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É** –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
2. [ ] **–£–ª—É—á—à–∏—Ç—å SSL** –æ–±—Ä–∞–±–æ—Ç–∫—É
3. [ ] **–î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
4. [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å fallback** –º–µ—Ö–∞–Ω–∏–∑–º—ã

### 3. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
1. **–°–æ–∑–¥–∞—Ç—å unit —Ç–µ—Å—Ç—ã** –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã** –¥–ª—è ThingSpeak
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å stress —Ç–µ—Å—Ç—ã** —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. **–î–æ–±–∞–≤–∏—Ç—å mock —Å–µ—Ä–≤–µ—Ä** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìà –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- [x] ‚úÖ 0 –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–π –±—É—Ñ–µ—Ä–∞
- [x] ‚úÖ 100% –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ NaN/Inf
- [x] ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- [ ] –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ >95% –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ)

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2024-01-XX  
**–í–µ—Ä—Å–∏—è –∫–æ–¥–∞:** 3.13.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. **–ò–°–ü–†–ê–í–õ–ï–ù–û –ü–ï–†–ï–ü–û–õ–ù–ï–ù–ò–ï –ë–£–§–ï–†–ê**
```cpp
// –ë–´–õ–û:
std::array<char, 8> buf;  // ‚ö†Ô∏è –°–õ–ò–®–ö–û–ú –ú–ê–õ–ï–ù–¨–ö–ò–ô –ë–£–§–ï–†!

// –°–¢–ê–õ–û:
std::array<char, 32> buf;  // ‚úÖ –£–í–ï–õ–ò–ß–ï–ù –î–û 32 –ë–ê–ô–¢
```

### 2. **–î–û–ë–ê–í–õ–ï–ù–ê –í–ê–õ–ò–î–ê–¶–ò–Ø –î–ê–ù–ù–´–•**
```cpp
// ‚úÖ –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø:
bool validateSensorData(const SensorData& data)
{
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ NaN –∏ Inf
    if (std::isnan(data.temperature) || std::isinf(data.temperature) ||
        std::isnan(data.humidity) || std::isinf(data.humidity) ||
        // ... –≤—Å–µ –ø–æ–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
    ) {
        return false;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π
    if (data.temperature < 0 || data.temperature > 100 ||
        data.humidity < 0 || data.humidity > 100 ||
        // ... –≤—Å–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
    ) {
        return false;
    }
    
    return true;
}
```

### 3. **–î–û–ë–ê–í–õ–ï–ù–ê –û–ë–†–ê–ë–û–¢–ö–ê NaN/Inf**
```cpp
// ‚úÖ –í formatFloat():
if (std::isnan(value) || std::isinf(value)) {
    return "0";  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
}
```

### 4. **–£–õ–£–ß–®–ï–ù–û –õ–û–ì–ò–†–û–í–ê–ù–ò–ï**
```cpp
// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û:
logDebugSafe("ThingSpeak HTTP –æ—Ç–≤–µ—Ç: %d", res);
```

### 5. **–î–û–ë–ê–í–õ–ï–ù–ê RETRY –õ–û–ì–ò–ö–ê**
```cpp
// ‚úÖ –î–õ–Ø –¢–ê–ô–ú–ê–£–¢–û–í:
if (consecutiveFailCount < 3) {
    logDebug("ThingSpeak: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥");
    lastTsPublish = millis() - config.thingSpeakInterval + 5000;
    return false;
}
```

### 6. **–î–û–ë–ê–í–õ–ï–ù USER-AGENT**
```cpp
// ‚úÖ –í setupThingSpeak():
ThingSpeak.setField(0, "JXCT-Soil-Sensor-v3.13.0");
```

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:
- **Python —Ç–µ—Å—Ç—ã:** PASS
- **ESP32 —Å–±–æ—Ä–∫–∞:** PASS  
- **–§–æ—Ä–º—É–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:** PASS
- **–í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:** 3.13.0

### üìà –£–ª—É—á—à–µ–Ω–∏—è:
- **0 –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–π –±—É—Ñ–µ—Ä–∞** ‚úÖ
- **100% –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚úÖ
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ NaN/Inf** ‚úÖ
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚úÖ
- **Retry –ª–æ–≥–∏–∫–∞** ‚úÖ 