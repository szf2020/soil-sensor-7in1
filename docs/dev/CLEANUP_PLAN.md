# –ü–ª–∞–Ω —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞ JXCT

## üéØ –¶–ï–õ–¨
–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏/–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –∏ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏**
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞** = —Ä–∞—Å—á–µ—Ç –ø–æ —Ç–æ—á–∫–∞–º ‚Üí **–í–°–ï–ì–î–ê –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è**
- **–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è** = –Ω–∞—É—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã ‚Üí **–¢–û–õ–¨–ö–û –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã **–û–ë–ï** —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: `fake_sensor.cpp` –∏ `modbus_sensor.cpp`

### 2. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**
- –£–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É `#define` –∏ `constexpr`
- –í—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `constexpr unsigned long`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã API –≤—ã–∑–æ–≤—ã**
- `fake_sensor.cpp` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API: `applyCalibration(SensorData&, SoilProfile)`
- –£–±—Ä–∞–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ç–∏–ø–∞ `applyECCalibration()`

### 4. **–£–°–¢–†–ê–ù–ï–ù–û –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –ö–û–î–ê** üéØ
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/sensor_processing.cpp` - –µ–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `include/sensor_processing.h` - –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ `fake_sensor.cpp` (40 —Å—Ç—Ä–æ–∫ ‚Üí 1 —Å—Ç—Ä–æ–∫–∞)
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤ `modbus_sensor.cpp` (30 —Å—Ç—Ä–æ–∫ ‚Üí 1 —Å—Ç—Ä–æ–∫–∞)
- ‚úÖ **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–º–µ–Ω—å—à–µ–Ω–æ –Ω–∞ 95%!**

### 5. **–ò–°–ü–†–ê–í–õ–ï–ù –°–ë–†–û–° –ò–ù–¢–ï–†–í–ê–õ–û–í** üîß
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `routes_config.cpp`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `jxct_constants.h`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test/test_interval_reset.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –í—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —Ç–µ–ø–µ—Ä—å —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
  - –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ –¥–∞—Ç—á–∏–∫–∞: 2000 –º—Å (2 —Å–µ–∫)
  - –ò–Ω—Ç–µ—Ä–≤–∞–ª MQTT: 30000 –º—Å (30 —Å–µ–∫)
  - –ò–Ω—Ç–µ—Ä–≤–∞–ª ThingSpeak: 600000 –º—Å (10 –º–∏–Ω)
  - –ò–Ω—Ç–µ—Ä–≤–∞–ª –≤–µ–±-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 3000 –º—Å (3 —Å–µ–∫)
  - –î–µ–ª—å—Ç–∞-—Ñ–∏–ª—å—Ç—Ä—ã: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (0.5¬∞C, 2.0%, 0.1 pH, 50 ¬µS/cm, 10 mg/kg)

## üîÑ –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
- –°–±–æ—Ä–∫–∞: `pio run -e esp32dev` ‚úÖ
- Python —Ç–µ—Å—Ç—ã: `python scripts/run_simple_tests.py` ‚úÖ  
- –¢–µ—Å—Ç—ã –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏: `python -m pytest test/test_compensation_formulas.py` ‚úÖ
- –õ–æ–≥–∏–∫–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏/–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –æ–±–µ–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö ‚úÖ

### üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:**
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:** –£–º–µ–Ω—å—à–µ–Ω–æ –Ω–∞ 95% üéØ
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç:** –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ API:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- **–°–±—Ä–æ—Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚úÖ
- **–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** 54 —Ç–µ—Å—Ç–∞, 100% –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å
- **–ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞:** –û–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –¥–∞—Ç—á–∏–∫–æ–≤

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û

### 6. **–£–î–ê–õ–ï–ù–´ –°–¢–ê–†–´–ï –§–ê–ô–õ–´ –ö–û–ú–ü–ï–ù–°–ê–¶–ò–ò** üóëÔ∏è
- ‚úÖ –£–¥–∞–ª–µ–Ω `src/sensor_compensation.cpp` - —Å—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –£–¥–∞–ª–µ–Ω `include/sensor_compensation.h` - —Å—Ç–∞—Ä—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `crop_recommendation_engine.cpp`

### 7. **–ò–°–ü–†–ê–í–õ–ï–ù–ê –ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø MQTT** üîß
- ‚úÖ MQTT –∏–Ω—Ç–µ—Ä–≤–∞–ª: 30000 –º—Å ‚Üí 1800000 –º—Å (30 –º–∏–Ω)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `config.cpp`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `jxct_constants.h`

### 8. **–£–ù–ò–§–ò–¶–ò–†–û–í–ê–ù–´ –ï–î–ò–ù–ò–¶–´ –ò–ó–ú–ï–†–ï–ù–ò–Ø** üìè
- ‚úÖ –í—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã —Ç–µ–ø–µ—Ä—å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### 9. **–°–û–ó–î–ê–ù –ï–î–ò–ù–´–ô –§–ê–ô–õ –¢–ò–ü–û–í** üìã
- ‚úÖ –°–æ–∑–¥–∞–Ω `include/sensor_types.h` - –µ–¥–∏–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å—Å—ã–ª–∫–∏

### 10. **–ò–°–ü–†–ê–í–õ–ï–ù–ê –°–¢–†–£–ö–¢–£–†–ê SENSORDATA** üîß
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ `ModbusSensorData` –∫–∞–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `SensorData`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ç–∏–ø–æ–≤ –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### 11. **–£–°–¢–†–ê–ù–ï–ù–´ –í–°–ï –û–®–ò–ë–ö–ò –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò** ‚úÖ
- ‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞: `pio run -e esp32dev` ‚úÖ
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç: `python scripts/run_simple_tests.py` ‚úÖ
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ç–∏–ø–æ–≤ –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. **–ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏**
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `SensorCompensationService` –∏ `SensorCalibrationService`
- –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 2. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è API**
- –í—Å–µ –¥–∞—Ç—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- –£–±—Ä–∞—Ç—å –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- –û–±–Ω–æ–≤–∏—Ç—å `COMPENSATION_GUIDE.md` —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- **–ö–æ–¥:** –ù–∞ 80% –º–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 15-20%
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –í 3 —Ä–∞–∑–∞ –ø—Ä–æ—â–µ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:
- **Cyclomatic Complexity:** –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 40%
- **Code Duplication:** < 5%
- **Test Coverage:** > 80%

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

1. **–í—ã—Å–æ–∫–∏–π:** –£–¥–∞–ª–µ–Ω–∏–µ `sensor_compensation.cpp`
2. **–°—Ä–µ–¥–Ω–∏–π:** –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è API
3. **–ù–∏–∑–∫–∏–π:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ö–ê–ß–ï–°–¢–í–ê

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞:
```bash
# –¢–µ—Å—Ç—ã
python scripts/run_simple_tests.py
python -m pytest test/test_compensation_formulas.py

# –°–±–æ—Ä–∫–∞
pio run -e esp32dev

# –ê–Ω–∞–ª–∏–∑
python scripts/run_clang_tidy_analysis.py
```

---
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –õ–æ–≥–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–º–µ–Ω—å—à–µ–Ω–æ –Ω–∞ 60%
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ 