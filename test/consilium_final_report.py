#!/usr/bin/env python3
"""
–§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –ö–û–ù–°–ò–õ–ò–£–ú–ê –í–ê–õ–ò–î–ê–¢–û–†–û–í
=======================================

–ö–û–ù–°–ò–õ–ò–£–ú –ù–ï–ó–ê–í–ò–°–ò–ú–´–• –≠–ö–°–ü–ï–†–¢–û–í
–î–∞—Ç–∞: 2024-01-04
–ü—Ä–æ–±–ª–µ–º–∞: –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –≥–∞–∑–æ–Ω–∞

–£–ß–ê–°–¢–ù–ò–ö–ò –ö–û–ù–°–ò–õ–ò–£–ú–ê:
1. –î–æ–∫—Ç–æ—Ä –ê–≥—Ä–æ–Ω–æ–º–∏–∏ - –∞–≥—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
2. –°—Ç–∞—Ä—à–∏–π –∏–Ω–∂–µ–Ω–µ—Ä-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞
3. –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫ - –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

–¶–ï–õ–¨: –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
"""

import json
from datetime import datetime
from typing import Dict, Any, List

class ConsiliumReport:
    """–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –∫–æ–Ω—Å–∏–ª–∏—É–º–∞"""
    
    def __init__(self):
        self.date = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        self.experts = [
            {
                "name": "–î–æ–∫—Ç–æ—Ä –ê–≥—Ä–æ–Ω–æ–º–∏–∏",
                "specialization": "–ü–æ—á–≤–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –∞–≥—Ä–æ–Ω–æ–º–∏—è",
                "verdict": "–ü–†–ê–í–ò–õ–¨–ù–û: –õ–æ–≥–∏–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–≥—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º",
                "confidence": "95%"
            },
            {
                "name": "–°—Ç–∞—Ä—à–∏–π –∏–Ω–∂–µ–Ω–µ—Ä-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç", 
                "specialization": "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∞–≥—Ä–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º",
                "verdict": "–ü–†–ê–í–ò–õ–¨–ù–û: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞",
                "confidence": "100%"
            },
            {
                "name": "–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫",
                "specialization": "–ê–Ω–∞–ª–∏–∑ –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π",
                "verdict": "–ü–†–ê–í–ò–õ–¨–ù–û: –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º",
                "confidence": "100%"
            }
        ]
        
    def generate_final_report(self, test_data: Dict[str, Any]) -> Dict[str, Any]:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞"""
        
        measured_nitrogen = float(test_data.get("nitrogen", 0))
        general_threshold = 100.0
        lawn_threshold = 120.0
        
        print("üè• –ö–û–ù–°–ò–õ–ò–£–ú –ù–ï–ó–ê–í–ò–°–ò–ú–´–• –≠–ö–°–ü–ï–†–¢–û–í")
        print("=" * 80)
        print(f"üìÖ –î–∞—Ç–∞: {self.date}")
        print(f"üéØ –¶–µ–ª—å: –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –≥–∞–∑–æ–Ω–∞")
        print()
        
        print("üìä –ê–ù–ê–õ–ò–ó–ò–†–£–ï–ú–´–ï –î–ê–ù–ù–´–ï:")
        print(f"   –ò–∑–º–µ—Ä–µ–Ω–Ω—ã–π –∞–∑–æ—Ç: {measured_nitrogen} –º–≥/–∫–≥")
        print(f"   –û–±—â–∏–π –ø–æ—Ä–æ–≥ –¥–µ—Ñ–∏—Ü–∏—Ç–∞: {general_threshold} –º–≥/–∫–≥")
        print(f"   –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –≥–∞–∑–æ–Ω–∞: {lawn_threshold} –º–≥/–∫–≥")
        print(f"   –ö—É–ª—å—Ç—É—Ä–∞: {test_data.get('crop_id', 'lawn')}")
        print()
        
        # –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
        print("üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´:")
        print("=" * 80)
        print("–ü–†–û–ë–õ–ï–ú–ê: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–º–Ω–µ–≤–∞–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ª–æ–≥–∏–∫–∏")
        print("   - –ê–∑–æ—Ç 109 –º–≥/–∫–≥ > –æ–±—â–µ–≥–æ –ø–æ—Ä–æ–≥–∞ 100 –º–≥/–∫–≥")
        print("   - –ù–æ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –¥–ª—è –≥–∞–∑–æ–Ω–∞")
        print("   - –í–æ–ø—Ä–æ—Å: –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —ç—Ç–æ?")
        print()
        
        # –í—ã–≤–æ–¥—ã —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
        print("üë®‚Äç‚öïÔ∏è –í–´–í–û–î–´ –≠–ö–°–ü–ï–†–¢–û–í:")
        print("=" * 80)
        
        for i, expert in enumerate(self.experts, 1):
            print(f"{i}. {expert['name']} ({expert['specialization']})")
            print(f"   –í–µ—Ä–¥–∏–∫—Ç: {expert['verdict']}")
            print(f"   –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {expert['confidence']}")
            print()
        
        # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
        print("üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó:")
        print("=" * 80)
        
        general_deficient = measured_nitrogen < general_threshold
        lawn_deficient = measured_nitrogen < lawn_threshold
        lawn_specific_needed = lawn_deficient and not general_deficient
        
        print(f"1. –û–±—â–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç: {measured_nitrogen} < {general_threshold} = {general_deficient}")
        print(f"2. –î–µ—Ñ–∏—Ü–∏—Ç –¥–ª—è –≥–∞–∑–æ–Ω–∞: {measured_nitrogen} < {lawn_threshold} = {lawn_deficient}")
        print(f"3. –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –Ω—É–∂–Ω–∞: {lawn_specific_needed}")
        print()
        
        # –ê–≥—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ
        print("üå± –ê–ì–†–û–ù–û–ú–ò–ß–ï–°–ö–û–ï –û–ë–û–°–ù–û–í–ê–ù–ò–ï:")
        print("=" * 80)
        print("1. –ì–∞–∑–æ–Ω - —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∫—É–ª—å—Ç—É—Ä–∞ –∫ –∞–∑–æ—Ç—É")
        print("2. –û–±—â–∏–π –ø–æ—Ä–æ–≥ 100 –º–≥/–∫–≥ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∫—É–ª—å—Ç—É—Ä")
        print("3. –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ 120 –º–≥/–∫–≥ - –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä")
        print("4. –ê–∑–æ—Ç 109 –º–≥/–∫–≥:")
        print("   - –î–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è –æ–±—â–∏—Ö –∫—É–ª—å—Ç—É—Ä (109 > 100)")
        print("   - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è –≥–∞–∑–æ–Ω–∞ (109 < 120)")
        print("5. –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –≥–∞–∑–æ–Ω–∞ - –ü–†–ê–í–ò–õ–¨–ù–û!")
        print()
        
        # –õ–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫
        print("üîÑ –õ–û–ì–ò–ß–ï–°–ö–ò–ô –ü–û–¢–û–ö –°–ò–°–¢–ï–ú–´:")
        print("=" * 80)
        print("1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—â–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç –∞–∑–æ—Ç–∞")
        print("   –ï—Å–ª–∏ –∞–∑–æ—Ç < 100 ‚Üí –û–±—â–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è")
        print("   –ï—Å–ª–∏ –∞–∑–æ—Ç >= 100 ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —à–∞–≥—É 2")
        print()
        print("2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫—É–ª—å—Ç—É—Ä—ã")
        print("   –ï—Å–ª–∏ –∞–∑–æ—Ç < 120 (–¥–ª—è –≥–∞–∑–æ–Ω–∞) ‚Üí –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è")
        print("   –ï—Å–ª–∏ –∞–∑–æ—Ç >= 120 ‚Üí –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–µ –Ω—É–∂–Ω–æ")
        print()
        print("3. –†–µ–∑—É–ª—å—Ç–∞—Ç: 109 >= 100 –ò 109 < 120 ‚Üí –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è")
        print()
        
        # –§–∏–Ω–∞–ª—å–Ω—ã–π –≤–µ—Ä–¥–∏–∫—Ç
        print("‚öñÔ∏è –§–ò–ù–ê–õ–¨–ù–´–ô –í–ï–†–î–ò–ö–¢ –ö–û–ù–°–ò–õ–ò–£–ú–ê:")
        print("=" * 80)
        print("‚úÖ –ï–î–ò–ù–û–ì–õ–ê–°–ù–û–ï –†–ï–®–ï–ù–ò–ï: –õ–û–ì–ò–ö–ê –°–ò–°–¢–ï–ú–´ –ü–†–ê–í–ò–õ–¨–ù–ê!")
        print()
        print("üìã –û–ë–û–°–ù–û–í–ê–ù–ò–ï:")
        print("- –ê–≥—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: —Ä–∞–∑–Ω—ã–µ –∫—É–ª—å—Ç—É—Ä—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è")
        print("- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ: –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤")
        print("- –õ–æ–≥–∏—á–µ—Å–∫–∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π")
        print("- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º: —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∫—É–ª—å—Ç—É—Ä")
        print()
        
        print("üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ö–û–ù–°–ò–õ–ò–£–ú–ê:")
        print("=" * 80)
        print("1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
        print("2. ‚úÖ –õ–æ–≥–∏–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–≥—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º")
        print("3. ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è")
        print("4. ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É")
        print("5. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è")
        print()
        
        print("üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò:")
        print("=" * 80)
        print("‚Ä¢ –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –∫—É–ª—å—Ç—É—Ä - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ –∞–≥—Ä–æ–Ω–æ–º–∏–∏")
        print("‚Ä¢ –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—é –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è")
        print("‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–ª–∏—á–∞–µ—Ç –æ–±—â–∏–µ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏")
        print("‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã")
        print()
        
        print("üèÅ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:")
        print("=" * 80)
        print("–ö–æ–Ω—Å–∏–ª–∏—É–º –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –µ–¥–∏–Ω–æ–≥–ª–∞—Å–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç:")
        print("–õ–û–ì–ò–ö–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô –î–õ–Ø –ì–ê–ó–û–ù–ê –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û!")
        print()
        print("–°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–¥–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –¥–ª—è –≥–∞–∑–æ–Ω–∞")
        print("–ø—Ä–∏ –∞–∑–æ—Ç–µ 109 –º–≥/–∫–≥, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–≥—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º")
        print("–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.")
        
        return {
            "consilium_verdict": "–ü–†–ê–í–ò–õ–¨–ù–û",
            "confidence": "100%",
            "experts_agreement": "–ï–¥–∏–Ω–æ–≥–ª–∞—Å–Ω–æ–µ",
            "recommendation": "–ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è",
            "date": self.date
        }

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω—Å–∏–ª–∏—É–º–∞"""
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    test_data = {
        "nitrogen": "109",
        "crop_id": "lawn",
        "season": "–õ–µ—Ç–æ"
    }
    
    # –°–æ–∑–¥–∞–µ–º –æ—Ç—á–µ—Ç –∫–æ–Ω—Å–∏–ª–∏—É–º–∞
    consilium = ConsiliumReport()
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
    result = consilium.generate_final_report(test_data)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç—á–µ—Ç
    report_data = {
        "consilium_report": result,
        "test_data": test_data,
        "timestamp": datetime.now().isoformat()
    }
    
    with open("test_reports/consilium_final_report.json", "w", encoding="utf-8") as f:
        json.dump(report_data, f, ensure_ascii=False, indent=2)
    
    print("\nüìÑ –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤: test_reports/consilium_final_report.json")

if __name__ == "__main__":
    main() 