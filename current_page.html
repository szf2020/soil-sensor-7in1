<!DOCTYPE html><html><head><meta charset='UTF-8'><meta name='viewport' content='width=device-width, initial-scale=1.0'><title>📊 Показания датчика</title><style>
/* === JXCT UI DESIGN SYSTEM v2.3.1 === */
* { box-sizing: border-box; }

body {
    font-family: Arial, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    margin: 0;
    padding: 20px;
    background: #f5f5f5;
    color: #333;
    font-size: 16px;
    line-height: 1.5;
}

.container {
    max-width: 1000px;
    margin: 0 auto;
    background: white;
    border-radius: 6px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 30px;
}

/* === ТИПОГРАФИКА === */
h1 {
    color: #333;
    font-size: 22px;
    margin: 0 0 20px 0;
    font-weight: 600;
}

h2 {
    color: #333;
    font-size: 18px;
    margin: 20px 0 12px 0;
    font-weight: 500;
    border-bottom: 2px solid #4CAF50;
    padding-bottom: 6px;
}

/* === НАВИГАЦИЯ === */
.nav {
    margin-bottom: 30px;
    padding: 15px 0;
    border-bottom: 1px solid #ddd;
}

.nav a {
    display: inline-block;
    margin-right: 10px;
    text-decoration: none;
    color: #4CAF50;
    font-weight: 600;
    padding: 8px 12px;
    border-radius: 6px;
    transition: 0.2s ease;
}

.nav a:hover {
    background: #4CAF50;
    color: white;
    transform: translateY(-1px);
}

/* === СЕКЦИИ === */
.section {
    margin-bottom: 25px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background: #fafafa;
}

/* === ФОРМЫ === */
.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: #333;
}

input[type=text], input[type=password], input[type=number], input[type=email], input[type=file], select, textarea {
    width: 100%;
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 16px;
    transition: 0.2s ease;
}

input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #4CAF50;
    box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
}

/* === КНОПКИ (ЕДИНАЯ СИСТЕМА) === */
.btn {
    display: inline-block;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    text-decoration: none;
    transition: 0.3s ease;
    margin-right: 10px;
    margin-bottom: 10px;
    min-width: 120px;
    text-align: center;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.btn-primary {
    background: #4CAF50;
    color: white;
}

.btn-primary:hover {
    background: #45a049;
}

.btn-secondary {
    background: #2196F3;
    color: white;
}

.btn-secondary:hover {
    background: #0b7dda;
}

.btn-danger {
    background: #F44336;
    color: white;
}

.btn-danger:hover {
    background: #d32f2f;
}

.btn-outline {
    background: transparent;
    color: #4CAF50;
    border: 2px solid #4CAF50;
}

.btn-outline:hover {
    background: #4CAF50;
    color: white;
}

/* === СООБЩЕНИЯ === */
.msg {
    padding: 15px 20px;
    margin-bottom: 20px;
    border-radius: 6px;
    font-weight: 500;
    border-left: 4px solid;
}

.msg-success {
    background: #e8f5e8;
    color: #2e7d32;
    border-left-color: #4CAF50;
}

.msg-error {
    background: #ffebee;
    color: #c62828;
    border-left-color: #F44336;
}

.msg-warning {
    background: #fff8e1;
    color: #f57c00;
    border-left-color: #FFC107;
}

.msg-info {
    background: #e3f2fd;
    color: #1565c0;
    border-left-color: #2196F3;
}

/* === ВСПОМОГАТЕЛЬНЫЕ ЭЛЕМЕНТЫ === */
.help {
    color: #666;
    font-size: 14px;
    margin-top: 5px;
    font-style: italic;
}

.status-dot {
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 8px;
    vertical-align: middle;
}

.dot-ok { background: #4CAF50; }
.dot-warn { background: #FFC107; }
.dot-err { background: #F44336; }
.dot-off { background: #bbb; }

/* === ЛОАДЕР === */
.loader {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #4CAF50;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spin 1s linear infinite;
    display: inline-block;
    margin-right: 10px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* === TOAST УВЕДОМЛЕНИЯ === */
.toast {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 25px;
    border-radius: 6px;
    color: white;
    font-weight: 600;
    z-index: 9999;
    opacity: 0;
    transform: translateX(100%);
    transition: all 0.3s ease;
}

.toast.show {
    opacity: 1;
    transform: translateX(0);
}



/* === МОБИЛЬНАЯ АДАПТАЦИЯ === */
@media (max-width: 768px) {
    body { padding: 10px; }
    .container { padding: 20px; margin: 5px; }
    h1 { font-size: 20px; }
    h2 { font-size: 16px; }
    .nav a {
        display: block;
        margin: 5px 0;
        text-align: center;
    }
    .btn {
        width: 100%;
        margin-right: 0;
        margin-bottom: 15px;
    }
    .section { padding: 12px; }
    .form-group { margin-bottom: 15px; }


}
    </style></head><body><div class='container'><div class='nav'><a href='/'>⚙️ Настройки</a><a href='/readings'>📊 Показания</a><a href='/intervals'>⏱️ Интервалы</a><a href='/config_manager'>📁 Конфигурация</a><a href='/updates'>🚀 Обновления</a><a href='/service'>🔧 Сервис</a></div><h1>📊 Показания датчика</h1><div id='statusInfo' style='margin:10px 0;font-size:16px;color:#333'></div><div class='section' style='background:#f8f9fa;padding:15px;border-radius:8px;margin:15px 0;'><h3>📋 Как работают показания</h3><div style='display:grid;grid-template-columns:1fr 1fr;gap:20px;font-size:14px;'><div><h4>🔧 Компенсация показаний</h4><ul style='margin:0;padding-left:20px;'><li><strong>RAW</strong> - сырые данные с датчика</li><li><strong>Компенс.</strong> - данные после математической компенсации:</li><ul style='margin:5px 0;padding-left:15px;'><li>🌡️ <strong>Температура:</strong> без изменений</li><li>💧 <strong>Влажность:</strong> без изменений</li><li>⚡ <strong>EC:</strong> температурная компенсация + модель Арчи (Archie, 1942)</li><li>⚗️ <strong>pH:</strong> температурная поправка по Нернсту (-0.003×ΔT)</li><li>🔴🟡🔵 <strong>NPK:</strong> коррекция по T, влажности и типу почвы (FAO 56 + Eur. J. Soil Sci.)</li></ul></ul></div><div><h4>🎯 Рекомендации</h4><ul style='margin:0;padding-left:20px;'><li><strong>Базовые нормы</strong> для выбранной культуры</li><li><strong>Сезонные корректировки</strong> (весна/лето/осень/зима)</li><li><strong>Тип среды</strong> (открытый грунт/теплица/помещение)</li><li><strong>Цветовая индикация:</strong></li><ul style='margin:5px 0;padding-left:15px;'><li>🟢 <strong>Зеленый:</strong> оптимальные условия измерения</li><li>🟠 <strong>Оранжевый:</strong> неоптимальные условия (влажность <25%, температура <5°C или >40°C)</li><li>🔵 <strong>Синий:</strong> полив активен (временная невалидность)</li><li>🔴 <strong>Красный:</strong> ошибки датчика (выход за физические пределы)</li></ul></ul></div></div></div><div class='section'><table class='data'><thead><tr><th></th><th>RAW</th><th>Компенс.</th><th>Газон</th></tr></thead><tbody><tr><td>🌡️ Температура, °C</td><td><span id='temp_raw'></span></td><td><span id='temp'></span></td><td><span id='temp_rec'></span></td></tr><tr><td>💧 Влажность, %</td><td><span id='hum_raw'></span></td><td><span id='hum'></span></td><td><span id='hum_rec'></span></td></tr><tr><td>⚡ EC, µS/cm</td><td><span id='ec_raw'></span></td><td><span id='ec'></span></td><td><span id='ec_rec'></span></td></tr><tr><td>⚗️ pH</td><td><span id='ph_raw'></span></td><td><span id='ph'></span></td><td><span id='ph_rec'></span></td></tr><tr><td>🔴 Азот (N), мг/кг</td><td><span id='n_raw'></span></td><td><span id='n'></span></td><td><span id='n_rec'></span><span id='n_season' class='season-adj'></span></td></tr><tr><td>🟡 Фосфор (P), мг/кг</td><td><span id='p_raw'></span></td><td><span id='p'></span></td><td><span id='p_rec'></span><span id='p_season' class='season-adj'></span></td></tr><tr><td>🔵 Калий (K), мг/кг</td><td><span id='k_raw'></span></td><td><span id='k'></span></td><td><span id='k_rec'></span><span id='k_season' class='season-adj'></span></td></tr></tbody></table></div><div class='section'><h2>⚙️ Калибровка датчика</h2><div style='background:#f8f9fa;padding:15px;border-radius:8px;margin:15px 0;'><h4>📊 Текущий статус калибровки</h4><div id='calibration-status'>Загрузка статуса...</div></div><div class='section'><h3>🧪 pH калибровка</h3><p>Введите показания для буферных растворов pH:</p><div class='form-group'><label for='ph_expected'>Ожидаемое значение pH:</label><input type='number' id='ph_expected' step='0.1' min='0' max='14' placeholder='7.0'></div><div class='form-group'><label for='ph_measured'>Измеренное значение pH:</label><input type='number' id='ph_measured' step='0.1' min='0' max='14' placeholder='6.8'></div><button onclick='addPHPoint()' class='btn btn-primary'>Добавить точку pH</button><div id='ph-points' style='margin-top:10px;'></div></div><div class='section'><h3>⚡ EC калибровка</h3><p>Введите показания для стандартных растворов EC:</p><div class='form-group'><label for='ec_expected'>Ожидаемое значение EC (мСм/см):</label><input type='number' id='ec_expected' step='0.1' min='0' placeholder='1.0'></div><div class='form-group'><label for='ec_measured'>Измеренное значение EC (мСм/см):</label><input type='number' id='ec_measured' step='0.1' min='0' placeholder='0.95'></div><button onclick='addECPoint()' class='btn btn-primary'>Добавить точку EC</button><div id='ec-points' style='margin-top:10px;'></div></div><div class='section'><h3>🌱 NPK калибровка</h3><p>Введите показания для дистиллированной воды (должны быть близки к нулю):</p><div class='form-group'><label for='npk_n'>N (мг/кг):</label><input type='number' id='npk_n' step='0.1' min='0' placeholder='0.0'></div><div class='form-group'><label for='npk_p'>P (мг/кг):</label><input type='number' id='npk_p' step='0.1' min='0' placeholder='0.0'></div><div class='form-group'><label for='npk_k'>K (мг/кг):</label><input type='number' id='npk_k' step='0.1' min='0' placeholder='0.0'></div><button onclick='setNPKPoint()' class='btn btn-primary'>Установить NPK</button></div><div class='section'><h3>⚙️ Действия</h3><div style='display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;'><button onclick='calculatePH()' class='btn btn-success'>Рассчитать pH</button><button onclick='calculateEC()' class='btn btn-success'>Рассчитать EC</button></div><div style='display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;'><button onclick='exportCalibration()' class='btn btn-info'>Экспорт</button><button onclick='importCalibration()' class='btn btn-info'>Импорт</button></div><button onclick='resetCalibration()' class='btn btn-danger'>Сбросить калибровку</button></div><div class='section' style='background:#e8f5e8;padding:15px;border-radius:8px;margin:15px 0;'><h4>💡 Полезная информация</h4><ul style='margin:5px 0;padding-left:20px;font-size:14px;'><li><strong>Стрелки ↑↓</strong> показывают направление изменений после компенсации</li><li><strong>Сезонные корректировки</strong> учитывают потребности растений в разные периоды</li><li><strong>Валидность данных</strong> проверяется по диапазонам и логическим связям</li><li><strong>Интервал обновления:</strong> каждые 3 секунды</li></ul></div><style>.season-adj { font-size: 0.8em; margin-left: 5px; }.season-adj.up { color: #2ecc71; }.season-adj.down { color: #e74c3c; }.data{width:100%;border-collapse:collapse}.data th,.data td{border:1px solid #ccc;padding:6px;text-align:center}.data th{background:#f5f5f5}.green{color:#4CAF50}.yellow{color:#FFC107}.orange{color:#FF9800}.red{color:#F44336}.blue{color:#2196F3}</style><script>function set(id,v){if(v!==undefined&&v!==null){document.getElementById(id).textContent=v;}}function colorDelta(a,b){var diff=Math.abs(a-b)/b*100;if(diff>30)return 'red';if(diff>20)return 'orange';if(diff>10)return 'yellow';return '';}function colorRange(v,min,max){var span=(max-min);if(span<=0)return '';if(v<min||v>max)return 'red';if(v<min+0.05*span||v>max-0.05*span)return 'orange';if(v<min+0.10*span||v>max-0.10*span)return 'yellow';return '';}function applyColor(spanId,cls){var el=document.getElementById(spanId);if(!el)return;el.classList.remove('red','orange','yellow','green');if(cls){el.classList.add(cls);}else{el.classList.add('green');}}var limits={temp:{min:-45,max:115},hum:{min:0,max:100},ec:{min:0,max:10000},ph:{min:3,max:9},n:{min:0,max:1999},p:{min:0,max:1999},k:{min:0,max:1999}};function updateSensor(){fetch('/sensor_json').then(r=>r.json()).then(d=>{set('temp_raw',d.raw_temperature);set('hum_raw',d.raw_humidity);set('ec_raw',d.raw_ec);set('ph_raw',d.raw_ph);set('n_raw',d.raw_nitrogen);set('p_raw',d.raw_phosphorus);set('k_raw',d.raw_potassium);set('temp_rec',d.rec_temperature);set('hum_rec',d.rec_humidity);set('ec_rec',d.rec_ec);set('ph_rec',d.rec_ph);set('n_rec',d.rec_nitrogen);set('p_rec',d.rec_phosphorus);set('k_rec',d.rec_potassium);const tol={temp:0.2,hum:0.5,ec:20,ph:0.05,n:5,p:3,k:3};function arrowSign(base,val,thr){base=parseFloat(base);val=parseFloat(val);if(isNaN(base)||isNaN(val))return '';if(val>base+thr)return '↑ ';if(val<base-thr)return '↓ ';return '';};function showWithArrow(id,sign,value){document.getElementById(id).textContent=sign+value;}showWithArrow('temp', arrowSign(d.raw_temperature ,d.temperature ,tol.temp), d.temperature);showWithArrow('hum',  arrowSign(d.raw_humidity    ,d.humidity    ,tol.hum ), d.humidity);showWithArrow('ec',   arrowSign(d.raw_ec          ,d.ec          ,tol.ec  ), d.ec);showWithArrow('ph',   arrowSign(d.raw_ph          ,d.ph          ,tol.ph  ), d.ph);showWithArrow('n',    arrowSign(d.raw_nitrogen    ,d.nitrogen    ,tol.n   ), d.nitrogen);showWithArrow('p',    arrowSign(d.raw_phosphorus  ,d.phosphorus  ,tol.p   ), d.phosphorus);showWithArrow('k',    arrowSign(d.raw_potassium   ,d.potassium   ,tol.k   ), d.potassium);showWithArrow('temp_rec', arrowSign(d.temperature ,d.rec_temperature ,tol.temp), d.rec_temperature);showWithArrow('hum_rec',  arrowSign(d.humidity    ,d.rec_humidity    ,tol.hum ), d.rec_humidity);showWithArrow('ec_rec',   arrowSign(d.ec          ,d.rec_ec          ,tol.ec  ), d.rec_ec);showWithArrow('ph_rec',   arrowSign(d.ph          ,d.rec_ph          ,tol.ph  ), d.rec_ph);showWithArrow('n_rec',    arrowSign(d.nitrogen    ,d.rec_nitrogen    ,tol.n   ), d.rec_nitrogen);showWithArrow('p_rec',    arrowSign(d.phosphorus  ,d.rec_phosphorus  ,tol.p   ), d.rec_phosphorus);showWithArrow('k_rec',    arrowSign(d.potassium   ,d.rec_potassium   ,tol.k   ), d.rec_potassium);function updateSeasonalAdjustments(season) {  const adjustments = {    'Весна': { n: '+20%', p: '+15%', k: '+10%' },    'Лето': { n: '-10%', p: '+5%', k: '+25%' },    'Осень': { n: '-20%', p: '+10%', k: '+15%' },    'Зима': { n: '-30%', p: '+5%', k: '+5%' }  };  const envType = 0;  const adj = adjustments[season] || { n: '', p: '', k: '' };  ['n', 'p', 'k'].forEach(elem => {    const span = document.getElementById(elem + '_season');    if(span) {      span.textContent = adj[elem] ? ` (${adj[elem]})` : '';      span.className = 'season-adj ' + (adj[elem].startsWith('+') ? 'up' : 'down');    }  });}var invalid = d.irrigation || d.alerts.length>0 || d.humidity<25 || d.temperature<5 || d.temperature>40;var statusHtml = invalid ? '<span class="red">Данные&nbsp;не&nbsp;валидны</span>' : '<span class="green">Данные&nbsp;валидны</span>';var seasonColor={'Лето':'green','Весна':'yellow','Осень':'yellow','Зима':'red','Н/Д':''}[d.season]||'';var seasonHtml=seasonColor?(`<span class=\"${seasonColor}\">${d.season}</span>`):d.season;document.getElementById('statusInfo').innerHTML=statusHtml+' | Сезон: '+seasonHtml;updateSeasonalAdjustments(d.season);var tvr=parseFloat(d.raw_temperature);applyColor('temp_raw',colorRange(tvr,limits.temp.min,limits.temp.max));var hvr=parseFloat(d.raw_humidity);applyColor('hum_raw',colorRange(hvr,limits.hum.min,limits.hum.max));var evr=parseFloat(d.raw_ec);applyColor('ec_raw',colorRange(evr,limits.ec.min,limits.ec.max));var pvr=parseFloat(d.raw_ph);applyColor('ph_raw',colorRange(pvr,limits.ph.min,limits.ph.max));var nvr=parseFloat(d.raw_nitrogen);applyColor('n_raw',colorRange(nvr,limits.n.min,limits.n.max));var p2r=parseFloat(d.raw_phosphorus);applyColor('p_raw',colorRange(p2r,limits.p.min,limits.p.max));var kvr=parseFloat(d.raw_potassium);applyColor('k_raw',colorRange(kvr,limits.k.min,limits.k.max));['temp','hum','ec','ph','n','p','k'].forEach(function(id){var el=document.getElementById(id);if(el){el.classList.remove('red','orange','yellow','green');}});var ct=parseFloat(d.temperature);var ch=parseFloat(d.humidity);var ce=parseFloat(d.ec);var cph=parseFloat(d.ph);var cn=parseFloat(d.nitrogen);var cp=parseFloat(d.phosphorus);var ck=parseFloat(d.potassium);applyColor('temp_rec', colorDelta(ct, parseFloat(d.rec_temperature)));applyColor('hum_rec',  colorDelta(ch, parseFloat(d.rec_humidity)));applyColor('ec_rec',   colorDelta(ce, parseFloat(d.rec_ec)));applyColor('ph_rec',   colorDelta(cph,parseFloat(d.rec_ph)));applyColor('n_rec',    colorDelta(cn, parseFloat(d.rec_nitrogen)));applyColor('p_rec',    colorDelta(cp, parseFloat(d.rec_phosphorus)));applyColor('k_rec',    colorDelta(ck, parseFloat(d.rec_potassium)));});}function updateCalibrationStatus() {  fetch('/api/calibration/status')    .then(response => response.json())    .then(data => {      let statusHtml = '<h4>📊 Статус калибровки</h4>';      for (let profile in data) {        const profileData = data[profile];        statusHtml += '<div class="profile-status">';        statusHtml += '<strong>Профиль ' + profile + ':</strong> ';        statusHtml += profileData.is_complete ? '✅ Полная' : '❌ Неполная';        statusHtml += '<br>Датчики: ';        profileData.sensors.forEach(sensor => {          statusHtml += sensor.is_valid ? '✅' : '❌';          statusHtml += sensor.type_name + ' (' + sensor.point_count + ' точек) ';        });        statusHtml += '</div>';      }      const statusElement = document.getElementById('calibration-status');      if (statusElement) {        statusElement.innerHTML = statusHtml;      }    })    .catch(error => {      console.error('Error updating calibration status:', error);      const statusElement = document.getElementById('calibration-status');      if (statusElement) {        statusElement.innerHTML = '❌ Ошибка загрузки статуса';      }    });}function addPHPoint() {  const expected = parseFloat(document.getElementById('ph_expected').value);  const measured = parseFloat(document.getElementById('ph_measured').value);  fetch('/api/calibration/ph/add', {    method: 'POST',    headers: {'Content-Type': 'application/json'},    body: JSON.stringify({expected: expected, measured: measured})  }).then(response => response.json())    .then(data => {      if(data.success) {        updateCalibrationStatus();        document.getElementById('ph_expected').value = '';        document.getElementById('ph_measured').value = '';      }    });}function addECPoint() {  const expected = parseFloat(document.getElementById('ec_expected').value);  const measured = parseFloat(document.getElementById('ec_measured').value);  fetch('/api/calibration/ec/add', {    method: 'POST',    headers: {'Content-Type': 'application/json'},    body: JSON.stringify({expected: expected, measured: measured})  }).then(response => response.json())    .then(data => {      if(data.success) {        updateCalibrationStatus();        document.getElementById('ec_expected').value = '';        document.getElementById('ec_measured').value = '';      }    });}function setNPKPoint() {  const n = parseFloat(document.getElementById('npk_n').value);  const p = parseFloat(document.getElementById('npk_p').value);  const k = parseFloat(document.getElementById('npk_k').value);  fetch('/api/calibration/npk/set', {    method: 'POST',    headers: {'Content-Type': 'application/json'},    body: JSON.stringify({n: n, p: p, k: k})  }).then(response => response.json())    .then(data => {      if(data.success) {        updateCalibrationStatus();        document.getElementById('npk_n').value = '';        document.getElementById('npk_p').value = '';        document.getElementById('npk_k').value = '';      }    });}function calculatePH() {  fetch('/api/calibration/ph/calculate', {method: 'POST'})    .then(response => response.json())    .then(data => {      if(data.success) {        updateCalibrationStatus();        alert('pH калибровка рассчитана! R² = ' + data.r_squared);      }    });}function calculateEC() {  fetch('/api/calibration/ec/calculate', {method: 'POST'})    .then(response => response.json())    .then(data => {      if(data.success) {        updateCalibrationStatus();        alert('EC калибровка рассчитана! R² = ' + data.r_squared);      }    });}function exportCalibration() {  fetch('/api/calibration/export')    .then(response => response.json())    .then(data => {      const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});      const url = URL.createObjectURL(blob);      const a = document.createElement('a');      a.href = url;      a.download = 'calibration.json';      a.click();    });}function importCalibration() {  const input = document.createElement('input');  input.type = 'file';  input.accept = '.json';  input.onchange = function(e) {    const file = e.target.files[0];    const reader = new FileReader();    reader.onload = function(e) {      fetch('/api/calibration/import', {        method: 'POST',        headers: {'Content-Type': 'application/json'},        body: e.target.result      }).then(response => response.json())        .then(data => {          if(data.success) {            updateCalibrationStatus();            alert('Калибровка импортирована!');          }        });    };    reader.readAsText(file);  };  input.click();}function resetCalibration() {  if(confirm('Сбросить всю калибровку?')) {    fetch('/api/calibration/reset', {method: 'POST'})      .then(response => response.json())      .then(data => {        if(data.success) {          updateCalibrationStatus();          alert('Калибровка сброшена!');        }      });  }}setInterval(updateSensor,3000);updateSensor();updateCalibrationStatus();setInterval(updateCalibrationStatus, 10000);</script><div style='margin-top:15px;font-size:14px;color:#555'><b>API:</b> <a href='/api/v1/sensor' target='_blank'>/api/v1/sensor</a> (JSON, +timestamp)</div></div>
<script>
function showToast(message, type) {
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = message;

    const colors = {
        'success': '#4CAF50',
        'error': '#F44336',
        'warning': '#FFC107',
        'info': '#2196F3'
    };

    toast.style.background = colors[type] || colors['info'];
    document.body.appendChild(toast);

    setTimeout(() => toast.classList.add('show'), 100);
    setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => document.body.removeChild(toast), 300);
    }, 3000);
}

// Показать toast при загрузке если есть сообщение
window.addEventListener('load', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const msg = urlParams.get('msg');
    const type = urlParams.get('type') || 'info';
    if (msg) {
        showToast(decodeURIComponent(msg), type);
    }
});
</script>
    </body></html>
